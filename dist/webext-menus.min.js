var webextMenus=function(){"use strict";const e="undefined"!=typeof browser?browser:chrome,n=e.menus||e.contextMenus,t=new Set(["all","bookmark","browser_action","launcher","page_action","tab","tools_menu"]),o=Object.values(n.ContextType).filter(e=>!t.has(e)),i=(()=>{try{const e=n.create({visible:!1});return n.remove(e),!0}catch(e){return!1}})();function c(e){n.remove(e.id),e.isCreated=!1}function s(e){e.id=n.create(Object.assign({},e.options)),e.isCreated=!0}return function(e,t=i){const r=[],f=[],u=t?{createHidden:function(e){e.options.visible=!1,s(e)},toggleVisible:function(e){for(const t of e)t.options.visible=t.show,n.update(t.id,{visible:t.show})}}:function(){const e=new Map;return{toggleVisible:function(e){for(const n of e)n.show||c(n);for(const o of e)if(o.show){if(o.isCreated)continue;n(o),s(o),t(o)}},init:function(n){const t={};for(const c of n){null!=c.id&&e.set(c.id,c);for(const e of i(c).reduce((e,n)=>("all"===n?o.forEach(n=>e.add(n)):e.add(n),e),new Set)){t[e]||(t[e]=new Map);const n=t[e].get(c.parentId);n&&(n.nextSibling||(n.nextSibling={}),n.nextSibling[e]=c),t[e].set(c.parentId,c)}}}};function n(e){if(e.nextSibling)for(const t of Object.values(e.nextSibling))t.isCreated&&c(t),n(t)}function t(e){if(e.nextSibling)for(const n of Object.values(e.nextSibling))!n.isCreated&&n.show&&s(n),t(n)}function i(n){return n.contexts?n.contexts:null!=n.parentId?i(e.get(n.parentId)):["page"]}}();return function(e){for(const n of e)n.options=Object.assign({},n),"function"==typeof n.checked&&(delete n.options.checked,f.push(n)),n.oncontext?(delete n.options.oncontext,r.push(n),n.show=!1,u.createHidden&&u.createHidden(n)):(n.show=!0,s(n));u.init&&u.init(e)}(e),{update:function(){!function(){const e=[];for(const n of r){const t=Boolean(n.oncontext());n.show!==t&&(n.show=t,e.push(n))}u.toggleVisible(e)}(),function(){for(const e of f)n.update(e.id,{checked:e.checked()})}()}}}}();
//# sourceMappingURL=webext-menus.min.js.map
